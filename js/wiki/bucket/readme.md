Bucket creation script for static site
======================================

This is bucket creation script for static HTML web pages generated by
Admin web app. Production bucket is 'www.mechanobio.info'. Test bucket
is 'mbinfo'.

Here are currently use bucket naming as of 2013 Oct.

    # production: www.mechanobio.info
    # developer test: test-2.mechanobio.info
    # internal test: test-1.mechanobio.info
    # static assets: mbinfo
    export BK=test-1.mechanobio.info

Setup security setting and static web configuration

    gsutil mb gs://$BK
    gsutil acl set acl.xml gs://$BK
    gsutil defacl set default-acl.xml gs://$BK
    gsutil cors set cors.xml   gs://$BK
    gsutil web set -m index.html -e error404.html gs://$BK
    gsutil versioning set on gs://$BK

Disallow web crawling for test bucket

    gsutil cp robots.txt gs://$BK/


Add request assets files

    # render html if necessary `ant cgi`
    gsutil cp ../../../cgi.html gs://$BK/cgi
    gsutil cp ../../../favicon.ico gs://$BK/favicon.ico
    gsutil cp -z png ../../../image/mbinfo-logo.png gs://$BK/image/mbinfo-logo.png
    gsutil setmeta -h "Cache-Control: public, max-age=86400"  gs://$BK/image/mbinfo-logo.png
    gsutil cp -z js ../../../../mbi-app/jsc/raphael-min-2.1.0.js gs://$BK/jsc/raphael-min-2.1.0.js
    gsutil setmeta -h "Cache-Control: public, max-age=2592000"  gs://$BK/jsc/raphael-min-2.1.0.js

For developer testing, upload default web page.

    # render html if necessary `ant cgi-dev`
    gsutil cp  -z html ../../../cgi.html gs://$BK/cgi
    gsutil cp  -z html ../../../cgi.html gs://$BK/error404.html
    gsutil cp -R ../../../image/img-nav/* gs://$BK/image/img-nav/
    gsutil cp -R ../../../gss/theme gs://$BK/gss/theme



